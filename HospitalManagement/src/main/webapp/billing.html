<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Manage Billing</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 0;
    }
    header {
      background: #2c3e50;
      color: red;
      padding: 5px;
      text-align: center;
    }
    nav {
      margin: 20px;
    }
    nav a {
      text-decoration: none;
      background: #3498db;
      color: white;
      padding: 10px 15px;
      border-radius: 5px;
      margin-right: 10px;
    }
    nav a:hover {
      background: #2980b9;
    }
    section {
      margin: 20px;
      padding: 20px;
      background: white;
      border-radius: 8px;
      box-shadow: 0px 2px 5px rgba(0,0,0,0.2);
    }
    h2 {
      color: #2c3e50;
    }
    form input, form select {
      padding: 8px;
      margin: 5px 0;
      width: 20%;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    form button {
      margin-top: 10px;
      padding: 10px 20px;
      border: none;
      background: #27ae60;
      color: white;
      border-radius: 5px;
      cursor: pointer;
    }
    form button:hover {
      background: #1e8449;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th, td {
      padding: 10px;
      text-align: left;
    }
    th {
      background: #3498db;
      color: white;
    }
  </style>
</head>
<body>
  <header>
    <h1>Hospital Management System</h1>
    <h3>Manage Billing</h3>
  </header>

  <nav>
    <a href="index.html">üè† Home</a>
    <a href="patients.html">Patients</a>
    <a href="doctors.html">Doctors</a>
    <a href="rooms.html">Rooms</a>
    <a href="services.html">Services</a>
    <a href="appointments.html">Appointments</a>
    <a href="billing.html">Billing</a>
  </nav>

  <!-- Create New Bill -->
  <section>
    <h2>Create New Bill</h2>
    <form id="createBillForm">
      <label>Patient ID:</label>
      <input type="number" name="patientId" required>

      <label>Appointment ID:</label>
      <input type="number" name="appointmentId" required>

      <label>Total Amount (‚Çπ):</label>
      <input type="number" name="amount" required>

      <label>Payment Status:</label>
      <select name="status">
        <option value="Unpaid">Unpaid</option>
        <option value="Paid">Paid</option>
      </select>

      <button type="submit">Generate Bill</button>
    </form>
  </section>

  <!-- Billing History -->
  <section>
    <h2>Billing History</h2>
    <table id="billingTable">
      <tr>
        <th>Bill ID</th>
        <th>Patient ID</th>
        <th>Appointment ID</th>
        <th>Total Amount</th>
        <th>Status</th>
        <th>Date</th>
      </tr>
      <tr>
        <td>201</td>
        <td>1</td>
        <td>101</td>
        <td>‚Çπ1500</td>
        <td>Paid</td>
        <td>2025-08-20</td>
      </tr>
      <tr>
        <td>202</td>
        <td>2</td>
        <td>102</td>
        <td>‚Çπ2000</td>
        <td>Unpaid</td>
        <td>2025-08-22</td>
      </tr>
    </table>
  </section>

  <!-- Update Payment Status -->
  <section>
    <h2>Update Payment Status</h2>
    <form id="updateBillForm">
      <label>Bill ID:</label>
      <input type="number" name="billId" required>

      <label>New Status:</label>
      <select name="status">
        <option value="Paid">Paid</option>
        <option value="Unpaid">Unpaid</option>
      </select>

      <button type="submit">Update Status</button>
    </form>
  </section>

  <script>
    const createForm = document.getElementById('createBillForm');
    const updateForm = document.getElementById('updateBillForm');
    const billingTable = document.getElementById('billingTable');

    // Function to generate today's date in YYYY-MM-DD format
    function getTodayDate() {
      const today = new Date();
      return today.toISOString().split('T')[0];
    }

    // Add new bill
    createForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const patientId = this.patientId.value;
      const appointmentId = this.appointmentId.value;
      const amount = this.amount.value;
      const status = this.status.value;

      // Generate new Bill ID
      const lastRow = billingTable.rows[billingTable.rows.length - 1];
      const newId = lastRow ? parseInt(lastRow.cells[0].innerText) + 1 : 201;

      // Add row to table
      const newRow = billingTable.insertRow();
      newRow.innerHTML = `
        <td>${newId}</td>
        <td>${patientId}</td>
        <td>${appointmentId}</td>
        <td>‚Çπ${amount}</td>
        <td>${status}</td>
        <td>${getTodayDate()}</td>
      `;

      alert("‚úÖ Bill created successfully!");
      this.reset();
    });

    // Update bill status
    updateForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const billId = parseInt(this.billId.value);
      const newStatus = this.status.value;

      let found = false;
      for (let i = 1; i < billingTable.rows.length; i++) {
        if (parseInt(billingTable.rows[i].cells[0].innerText) === billId) {
          billingTable.rows[i].cells[4].innerText = newStatus;
          alert("‚úÖ Payment status updated successfully!");
          found = true;
          break;
        }
      }

      if (!found) {
        alert("‚ùå Bill ID not found!");
      }

      this.reset();
    });
  </script>
</body>
</html>
